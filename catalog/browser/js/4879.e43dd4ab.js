"use strict";(self["webpackChunk_radiantearth_stac_browser"]=self["webpackChunk_radiantearth_stac_browser"]||[]).push([[4879],{4879:function(t,e,s){s.r(e),s.d(e,{default:function(){return z}});var n=function(){var t=this,e=t._self._c;return e("section",{staticClass:"assets mb-4"},[t.displayTitle?e("h2",[t._v(t._s(t.displayTitle))]):t._e(),e("div",{staticClass:"accordion",attrs:{role:"tablist"}},t._l(t.assets,(function(s,n){return e("Asset",{key:n,attrs:{asset:s,expand:t.expand,context:t.context,definition:t.definition,shown:t.shown.includes(n),id:n},on:{show:t.show}})})),1)])},a=[],r=function(){var t=this,e=t._self._c;return e("b-card",{staticClass:"asset expandable-card",attrs:{"no-body":""}},[e("b-card-header",{attrs:{"header-tag":"header",role:"tab"}},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.uid,expression:"uid"}],attrs:{block:"",variant:"asset",squared:""}},[e("span",{staticClass:"chevron",attrs:{"aria-hidden":"true"}},[t.expanded?e("b-icon-chevron-down"):e("b-icon-chevron-right")],1),e("span",{staticClass:"title"},[t._v(t._s(t.asset.title||t.id))]),Array.isArray(t.asset.roles)?e("div",{staticClass:"badges ml-1"},[t.shown?e("b-badge",{staticClass:"shown",attrs:{variant:"success",title:t.$t("assets.currentlyShown")}},[e("b-icon-check"),t._v(" "+t._s(t.$t("assets.shown"))+" ")],1):t._e(),t.asset.deprecated?e("b-badge",{staticClass:"deprecated",attrs:{variant:"warning"}},[t._v(t._s(t.$t("deprecated")))]):t._e(),t._l(t.asset.roles,(function(s){return e("b-badge",{key:s,staticClass:"role",attrs:{variant:"data"===s?"primary":"secondary"}},[t._v(t._s(t.displayRole(s)))])})),t.shortFileFormat?e("b-badge",{staticClass:"format",attrs:{variant:"dark",title:t.fileFormat}},[e("span",{domProps:{innerHTML:t._s(t.shortFileFormat)}})]):t._e()],2):t._e()])],1),e("b-collapse",{attrs:{id:t.uid,accordion:t.type,role:"tabpanel"},on:{input:t.collapseToggled},model:{value:t.expanded,callback:function(e){t.expanded=e},expression:"expanded"}},[t.hasAlternatives?[e("b-tabs",{attrs:{card:""}},[e("b-tab",{attrs:{title:t.asset.name||t.$t("assets.alternate.main"),active:""}},[e("AssetAlternative",{attrs:{asset:t.asset,context:t.context,shown:t.shown,hasAlternatives:""},on:{show:t.show}})],1),t._l(t.alternatives,(function(s,n){return e("b-tab",{key:n,attrs:{title:s.name||n}},[e("AssetAlternative",{key:n,attrs:{asset:s,context:t.context,shown:t.shown,hasAlternatives:""},on:{show:t.show}})],1)}))],2)]:e("AssetAlternative",{attrs:{asset:t.asset,context:t.context,shown:t.shown},on:{show:t.show}})],2)],1)},i=[],o=s(48883),l=s(82948),c=s(95050),p=s(63405),d=s(50735),h=s(95353),u=function(){var t=this,e=t._self._c;return e(t.component,{tag:"component"},[e("b-card-title",[e("span",{domProps:{innerHTML:t._s(t.fileFormat)}})]),e("HrefActions",{attrs:{isAsset:"",data:t.asset,shown:t.shown},on:{show:t.show}}),t.asset.description?e("b-card-text",{staticClass:"mt-4"},[e("Description",{attrs:{description:t.asset.description,compact:""}})],1):t._e(),e("CopcApiCode",{attrs:{asset:t.asset}}),e("Metadata",{staticClass:"mt-4",attrs:{data:t.asset,context:t.context,ignoreFields:t.ignore,title:"",type:"Asset"}})],1)},b=[],f=s(41526),y=s(54656),m=function(){var t=this,e=t._self._c;return t.isCopc?e("div",{staticClass:"copc-api-code mt-4"},[e("b-card",{attrs:{"no-body":""}},[e("b-card-header",{staticClass:"p-2",attrs:{"header-tag":"header"}},[e("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.copc-api-collapse",modifiers:{"copc-api-collapse":!0}}],attrs:{block:"",variant:"outline-secondary",size:"sm",squared:""}},[e("span",{staticClass:"chevron",attrs:{"aria-hidden":"true"}},[t.expanded?e("b-icon-chevron-down"):e("b-icon-chevron-right")],1),e("b-icon-code-slash",{staticClass:"mr-1"}),t._v(" API Access Code ")],1)],1),e("b-collapse",{attrs:{id:"copc-api-collapse"},model:{value:t.expanded,callback:function(e){t.expanded=e},expression:"expanded"}},[e("b-card-body",[e("b-tabs",{attrs:{"content-class":"mt-3",small:""}},[e("b-tab",{attrs:{title:"Python",active:""}},[e("pre",{staticClass:"api-code-block"},[e("code",[t._v(t._s(t.pythonCode))])]),e("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(e){return t.copyCode(t.pythonCode)}}},[e("b-icon-clipboard"),t._v(" "+t._s(t.copyLabel)+" ")],1)],1),e("b-tab",{attrs:{title:"JavaScript"}},[e("pre",{staticClass:"api-code-block"},[e("code",[t._v(t._s(t.jsCode))])]),e("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(e){return t.copyCode(t.jsCode)}}},[e("b-icon-clipboard"),t._v(" "+t._s(t.copyLabel)+" ")],1)],1),e("b-tab",{attrs:{title:"PDAL"}},[e("pre",{staticClass:"api-code-block"},[e("code",[t._v(t._s(t.pdalCode))])]),e("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:function(e){return t.copyCode(t.pdalCode)}}},[e("b-icon-clipboard"),t._v(" "+t._s(t.copyLabel)+" ")],1)],1)],1)],1)],1)],1)],1):t._e()},v=[],g={name:"CopcApiCode",components:{BCollapse:o.K,BTabs:c.r,BTab:p.a,BIconChevronRight:l.f4q,BIconChevronDown:l.rc_,BIconCodeSlash:l.qn$,BIconClipboard:l.ceV},props:{asset:{type:Object,required:!0}},data(){return{expanded:!1,copyLabel:"Copy"}},computed:{...(0,h.aH)(["data"]),isCopc(){return this.asset&&"application/vnd.laszip+copc"===this.asset.type},copcUrl(){var t;return(null===(t=this.asset)||void 0===t?void 0:t.href)||""},bbox(){var t;return(null===(t=this.data)||void 0===t?void 0:t.bbox)||null},projBbox(){var t,e;return(null===(t=this.data)||void 0===t||null===(e=t.properties)||void 0===e?void 0:e["proj:bbox"])||null},projEpsg(){var t,e;return(null===(t=this.data)||void 0===t||null===(e=t.properties)||void 0===e?void 0:e["proj:epsg"])||null},bboxStr(){return this.bbox?`[${this.bbox.join(", ")}]`:"null"},projBboxStr(){return this.projBbox?`[${this.projBbox.join(", ")}]`:"null"},pythonCode(){const t=this.copcUrl;return this.projEpsg&&this.projBbox?`# Python - Read COPC Point Cloud with PDAL\n# Install: pip install pdal\n# Full dataset bbox in WGS84: ${this.bboxStr}\n# Native coordinate system: EPSG:${this.projEpsg}\n# Native bbox: ${this.projBboxStr}\n\nimport pdal\nimport json\n\nurl = "${t}"\n\n# Read full dataset (this may take time for large files)\npipeline_json = json.dumps({\n    "pipeline": [\n        {"type": "readers.copc", "filename": url}\n    ]\n})\n\npipeline = pdal.Pipeline(pipeline_json)\ncount = pipeline.execute()\nprint(f"Total points: {count:,}")\n\n# Access point data as numpy array\narrays = pipeline.arrays\nif arrays:\n    arr = arrays[0]\n    print(f"Fields: {arr.dtype.names}")\n    print(f"X range: {arr['X'].min():.2f} - {arr['X'].max():.2f}")\n    print(f"Y range: {arr['Y'].min():.2f} - {arr['Y'].max():.2f}")\n    print(f"Z range: {arr['Z'].min():.2f} - {arr['Z'].max():.2f}")`:`# Python - Read COPC Point Cloud with PDAL\n# Install: pip install pdal\n\nimport pdal\nimport json\n\nurl = "${t}"\n\npipeline_json = json.dumps({\n    "pipeline": [\n        {"type": "readers.copc", "filename": url}\n    ]\n})\n\npipeline = pdal.Pipeline(pipeline_json)\ncount = pipeline.execute()\nprint(f"Total points: {count:,}")`},jsCode(){const t=this.copcUrl;return`// JavaScript - Query COPC Point Cloud\n// Install: npm install copc\nimport { Copc } from 'copc';\n\nconst url = "${t}";\n\nasync function loadPoints() {\n  const copc = await Copc.create(url);\n  const { header, info } = copc;\n\n  console.log('Point count:', header.pointCount);\n  console.log('Bounds:', info.cube);\n\n  // Read hierarchy and nodes\n  const hierarchy = await Copc.loadHierarchyPage(url, info.rootHierarchyPage);\n  console.log('Hierarchy nodes:', Object.keys(hierarchy.nodes).length);\n}\n\nloadPoints();`},pdalCode(){const t=this.copcUrl;let e=`{\n  "pipeline": [\n    {\n      "type": "readers.copc",\n      "filename": "${t}"\n    },\n    {\n      "type": "writers.las",\n      "filename": "output.las"\n    }\n  ]\n}\n\n# Run with: pdal pipeline pipeline.json`;return this.projEpsg&&this.projBbox&&(e+=`\n\n# Note: This file uses EPSG:${this.projEpsg} coordinate system\n# Native bounds (for filtering): ${this.projBboxStr}\n# To filter by bounds, add to readers.copc:\n#   "bounds": "([minX, maxX], [minY, maxY])"\n# Use native coordinates (EPSG:${this.projEpsg}), NOT WGS84 lat/lng`),e}},methods:{async copyCode(t){try{await navigator.clipboard.writeText(t),this.copyLabel="Copied!",setTimeout((()=>{this.copyLabel="Copy"}),2e3)}catch(e){console.error("Failed to copy:",e)}}}},w=g,x=s(81656),C=(0,x.A)(w,m,v,!1,null,"8909e878",null),_=C.exports,A=s(67467),B={name:"Asset",components:{Description:f["default"],HrefActions:y.A,CopcApiCode:_,Metadata:()=>Promise.all([s.e(537),s.e(4870),s.e(5428)]).then(s.bind(s,75428))},mixins:[(0,A.A)({formatMediaType:d.formatMediaType})],props:{asset:{type:Object,required:!0},context:{type:Object,default:null},hasAlternatives:{type:Boolean,default:!1},shown:{type:Boolean,default:!1}},data(){return{ignore:["href","title","description","type","roles","proj:bbox","proj:geometry","table:storage_options","xarray:open_kwargs","xarray:storage_options","alternate","name"]}},computed:{...(0,h.aH)(["buildTileUrlTemplate","useTileLayerAsFallback"]),component(){return this.hasAlternatives?"div":"b-card-body"},tileRendererType(){return this.buildTileUrlTemplate&&!this.useTileLayerAsFallback?"server":"client"},fileFormat(){return"string"===typeof this.asset.type&&this.asset.type.length>0?this.formatMediaType(this.asset.type):null}},methods:{show(){this.$emit("show",...arguments)}}},j=B,$=(0,x.A)(j,u,b,!1,null,null,null),T=$.exports,P=s(2566),k={name:"Asset",components:{AssetAlternative:T,BCollapse:o.K,BIconCheck:l.GSz,BIconChevronDown:l.rc_,BIconChevronRight:l.f4q,BTabs:c.r,BTab:p.a},mixins:[(0,A.A)({formatMediaType:d.formatMediaType})],props:{asset:{type:Object,required:!0},id:{type:String,required:!0},context:{type:Object,default:null},definition:{type:Boolean,default:!1},expand:{type:Boolean,default:null},shown:{type:Boolean,default:!1}},data(){return{expanded:!1}},computed:{...(0,h.aH)(["stateQueryParameters"]),type(){return this.definition?"itemdef":"asset"},uid(){return`${this.type}-${this.id}`},fileFormat(){return"string"===typeof this.asset.type&&this.asset.type.length>0?this.formatMediaType(this.asset.type):null},shortFileFormat(){return"string"===typeof this.asset.type&&this.asset.type.length>0?this.formatMediaType(this.asset.type,null,{shorten:!0}):null},alternatives(){if(!P.Ay.isObject(this.asset.alternate))return{};const t=Object.assign({},this.asset);delete t.alternate;const e={};for(const s in this.asset.alternate)e[s]=Object.assign({},t,this.asset.alternate[s]);return e},hasAlternatives(){return P.Ay.size(this.alternatives)>0}},created(){this.stateQueryParameters[this.type].indexOf(this.uid)>-1?this.expanded=!0:"boolean"===typeof this.expand?this.expanded=this.expand:this.expanded=!1},methods:{displayRole(t){let e=`assets.role.${t}`;return this.$te(e)?this.$t(e):t},collapseToggled(t){let e=t?"openCollapsible":"closeCollapsible";this.$store.commit(e,{type:this.type,uid:this.uid})},show(...t){this.$emit("show",...t)}}},O=k,S=(0,x.A)(O,r,i,!1,null,null,null),I=S.exports,F={name:"Assets",components:{Asset:I},props:{assets:{type:Object,required:!0},shown:{type:Array,default:()=>[]},context:{type:Object,default:null},definition:{type:Boolean,default:!1},title:{type:String,default:null}},computed:{count(){return P.Ay.size(this.assets)},displayTitle(){if(null===this.title){let t=this.definition?"assets.inItems":"stacAssets";return this.$tc(t,this.count)}return this.title},expand(){return!this.definition&&(!(1!==this.count||!this.stac||!this.stac.isItem())||null)}},methods:{show(t,e,s){this.$emit("showAsset",t,e,s)}}},L=F,G=(0,x.A)(L,n,a,!1,null,null,null),z=G.exports},54656:function(t,e,s){s.d(e,{A:function(){return A}});var n=function(){var t=this,e=t._self._c;return t.href?e("b-button-group",{staticClass:"actions",attrs:{vertical:t.vertical,size:t.size}},[t.isBrowserProtocol&&t.isAsset?e("b-button",{attrs:{href:t.href,target:"_blank",variant:"primary"}},[t.browserCanOpenFile?e("b-icon-box-arrow-up-right"):e("b-icon-download"),t._v(" "+t._s(t.buttonText)+" ")],1):t._e(),e("CopyButton",{attrs:{variant:"primary",copyText:t.href}},[t._v(" "+t._s(t.copyButtonText)+" ")]),t.isAsset&&t.canShow&&!t.shown?e("b-button",{attrs:{variant:"primary"},on:{click:t.show}},[e("b-icon-eye",{staticClass:"mr-1"}),t.isThumbnail?[t._v(t._s(t.$t("assets.showThumbnail")))]:[t._v(t._s(t.$t("assets.showOnMap")))]],2):t._e(),t._l(t.actions,(function(s){return e("b-button",t._b({key:s.id,attrs:{variant:"primary"},on:{click:s.onClick}},"b-button",s.btnOptions,!1),[s.icon?e(s.icon,{tag:"component",staticClass:"mr-1"}):t._e(),t._v(" "+t._s(s.text)+" ")],1)}))],2):t._e()},a=[],r=s(82948),i=s(41526),o=s(31831),l=s(2566),c=s(95353),p=s(84193),d=s.n(p);class h{constructor(t,e){this.id=t,this.component=e}get btnOptions(){let t;return this.uri instanceof d()?t=this.uri.toString():"string"===typeof this.uri&&(t=this.uri),t?{href:t,target:"_blank"}:{}}get onClick(){return()=>{}}get uri(){return null}get show(){return!1}get icon(){return r.hNP}}class u extends h{constructor(t,e,s){super(s,e),this.asset=t}}class b extends u{get show(){return this.component.isBrowserProtocol&&"application/vnd.laszip+copc"===this.asset.type}get uri(){let t=new(d())("https://stac.uixai.org/potree/index.html");return t.addQuery("files",this.component.href),t}get text(){return"View in Potree"}}class f extends u{get show(){return!1}get uri(){let t=new(d())("https://stac.uixai.org/terrain/index.html");return t.addQuery("dem",this.component.href),t}get text(){return"View in 3D"}}var y=s(48907);class m extends u{get show(){return this.component.isBrowserProtocol&&l.oV==this.asset.type}get uri(){let t=new(d())("https://geojson.io");return t.addQuery("data",`text/x-url,${this.component.href}`),t}get text(){return y.Ay.t("actions.openIn",{service:"geojson.io"})}}var v={PotreeViewer:b,TerrainViewer:f,GeoJsonIo:m},g={},w={name:"HrefActions",components:{BIconBoxArrowUpRight:r.hNP,BIconDownload:r.AXN,BIconEye:r.bL_,CopyButton:()=>Promise.resolve().then(s.bind(s,22356)),Description:i["default"],Metadata:()=>Promise.all([s.e(537),s.e(4870),s.e(5428)]).then(s.bind(s,75428))},props:{data:{type:Object,required:!0},isAsset:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},size:{type:String,default:"md"},shown:{type:Boolean,default:!1}},computed:{...(0,c.L8)(["getRequestUrl"]),actions(){return Object.entries(this.isAsset?v:g).map((([t,e])=>new e(this.data,this,t))).filter((t=>t.show))},canShow(){return"string"===typeof this.data.type&&(!this.isDemCogAsset&&(!("server"!==this.tileRendererType||!l.df.includes(this.data.type))||(!this.isGdalVfs||"client"!==this.tileRendererType)&&(!!this.isBrowserProtocol&&!!l.C8.includes(this.data.type))))},isDemCogAsset(){if(!this.isAsset)return!1;const t="image/tiff; application=geotiff; profile=cloud-optimized"===this.data.type;if(!t)return!1;const e=this.data.roles;return!!Array.isArray(e)&&(e.includes("elevation")||e.includes("visual"))},protocol(){if("string"===typeof this.href&&this.href){let t=this.href.match(/^(\w+):\/\//);if(t)return t[1].toLowerCase()}return null},isBrowserProtocol(){return!this.protocol&&!this.isGdalVfs||l.I5.includes(this.protocol)},isThumbnail(){return this.isAsset?Array.isArray(this.data.roles)&&this.data.roles.includes("thumbnail")&&!this.data.roles.includes("overview"):"preview"===this.data.rel&&l.Ay.canBrowserDisplayImage(this.data)},isGdalVfs(){return l.Ay.isGdalVfsUri(this.href)},href(){if("string"!==typeof this.data.href)return null;let t=null;return this.context instanceof o.A&&(t=this.context.getAbsoluteUrl()),this.getRequestUrl(this.data.href,t)},from(){if(this.isGdalVfs){let t=this.href.match(/^\/vsi([a-z\d]+)(_streaming)?\//);return this.protocolName(t,this.href)}return this.protocolName(this.protocol,this.href)},browserCanOpenFile(){if(this.isGdalVfs)return!1;if(l.Ay.canBrowserDisplayImage(this.data))return!0;if("string"===typeof this.data.type)switch(this.data.type.toLowerCase()){case"text/html":case"application/xhtml+xml":case"text/plain":case"application/pdf":return!0}return!1},buttonText(){if(this.browserCanOpenFile&&this.isBrowserProtocol)return this.$t("open");let t=!this.isBrowserProtocol&&this.from?"withSource":"generic";return this.$t(`assets.download.${t}`,{source:this.from})},copyButtonText(){let t=this.isGdalVfs?"copyGdalVfsUrl":"copyUrl",e=!this.isBrowserProtocol&&this.from?"withSource":"generic";return this.$t(`assets.${t}.${e}`,{source:this.from})}},methods:{protocolName(t,e=null){if("string"!==typeof t)return"";switch(t.toLowerCase()){case"s3":if(e)try{const t=new(d())(e),s=`protocol.s3.${t.domain()}`;if(this.$te(s))return this.$t(s)}catch(s){}return this.$t("protocol.s3.default");case"abfs":case"abfss":return this.$t("protocol.azure");case"gcs":return this.$t("protocol.gcs");case"ftp":return this.$t("protocol.ftp");case"oss":return this.$t("protocol.oss");case"file":return this.$t("protocol.file")}return""},show(){let t=Object.assign({},this.data);this.isGdalVfs||(t.href=this.href),this.$emit("show",t,this.id,this.isThumbnail)}}},x=w,C=s(81656),_=(0,C.A)(x,n,a,!1,null,null,null),A=_.exports}}]);
//# sourceMappingURL=4879.e43dd4ab.js.map